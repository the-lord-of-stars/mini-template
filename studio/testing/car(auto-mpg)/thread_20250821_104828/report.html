<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Research Report: Automated Visualization</title>
  <script src='https://cdn.jsdelivr.net/npm/vega@5'></script>
  <script src='https://cdn.jsdelivr.net/npm/vega-lite@5'></script>
  <script src='https://cdn.jsdelivr.net/npm/vega-embed@6'></script>
  <script src='https://cdn.tailwindcss.com'></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          typography: ({ theme }) => ({
            DEFAULT: { css: { color: theme('colors.gray.800') } }
          })
        }
      }
    }
  </script>
</head>
<body class='bg-white text-gray-800'>
  <div id='progress-bar' class='fixed top-0 left-0 h-1 bg-black z-[9999]' style='width:0%'></div>  <nav class='sticky top-0 bg-white border-b border-gray-200 z-50'>
    <div class='w-[95%] mx-auto px-6 py-3 flex justify-between items-center'>
      <a href='#' class='font-bold text-lg'>Agentic VIS Report</a>
      <div class='hidden md:flex items-center space-x-10 text-sm'>
        <a href='https://www.visagent.org/' target='_blank' class='hover:text-primary-600 text-lg'>Challenge</a>
        <a href='https://github.com/the-lord-of-stars/mini-template' target='_blank'>
          <img src='https://cdnjs.cloudflare.com/ajax/libs/simple-icons/9.16.0/github.svg' alt='GitHub' class='w-6 h-6'>
        </a>
      </div>
      <button id='menu-btn' class='md:hidden flex items-center focus:outline-none'>
        <svg xmlns='http://www.w3.org/2000/svg' class='w-6 h-6' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
          <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 6h16M4 12h16M4 18h16' />
        </svg>
      </button>
    </div>
    <div id='mobile-menu' class='hidden md:hidden bg-white border-t border-gray-200'>
      <div class='px-6 py-3 flex flex-col space-y-4'>
        <a href='https://www.visagent.org/' target='_blank' class='hover:text-primary-600 text-lg'>Official Challenge Website</a>
        <a href='https://github.com/the-lord-of-stars/mini-template' target='_blank' class='flex items-center space-x-4'>
          <img src='https://cdnjs.cloudflare.com/ajax/libs/simple-icons/9.16.0/github.svg' alt='GitHub' class='w-6 h-6'>
          <span class='text-lg'>Project GitHub Repo</span>
        </a>
      </div>
    </div>
  </nav>
  <script>
    const btn = document.getElementById('menu-btn');
    const menu = document.getElementById('mobile-menu');
    btn.addEventListener('click', () => { menu.classList.toggle('hidden'); });
  </script>
  <nav class='hidden lg:block fixed top-20 left-6 w-[15%] h-[80vh] overflow-y-auto
               p-4 text-sm'
       aria-label='Table of contents'>
    <h2 class='font-semibold text-gray-900 mb-3'>Table of contents</h2>
    <ol id='toc-list' class='space-y-2'></ol>
  </nav>
  <main class='w-[90%] max-w-3xl mx-auto px-6 py-12 lg:w-[75%] lg:ml-[20%] lg:max-w-none lg:mx-0'>
    <header class='text-center mb-12'>
      <h1 class='text-4xl font-bold text-gray-900 mb-4'>Trade-offs behind fuel economy: a multivariate exploration of the Auto MPG cars dataset (1970–1982)</h1>
       <p class='text-lg text-gray-600'>Generated on 2025-08-21 </p>
    </header>
    <article class='prose prose-lg prose-gray'>
<section class='mb-16'>
  <h2 class='text-3xl font-bold mb-6 border-b border-gray-200 pb-2'>
    1. Executive summary & goals
  </h2>
  <div class='space-y-10'>
    <div class='prose prose-lg prose-gray max-w-none'>
      <p class="text-gray-700 leading-relaxed mb-4">This report characterizes the multivariate trade-offs that governed fuel economy in the Auto MPG dataset (1970–1982) and provides a compact set of visual benchmarks for automated charting systems. Across the dataset, vehicle weight, displacement and horsepower form a tightly correlated cluster that explains most variation in MPG: heavier, larger-displacement, higher-horsepower cars tend to have much lower fuel economy. The 1974 oil‑crisis marks a clear inflection—median horsepower and weight drop while median MPG rises—though origins differ in magnitude: U.S. cars began heaviest and most powerful but show the largest absolute MPG improvement through the period, while Japanese cars achieve the highest medians for MPG by the early 1980s. Missing horsepower values are rare (6/398 = 1.5%) but unevenly distributed and worth flagging for automated pipelines. The visual portfolio used here—marginal histograms, pairwise scatter matrices, stratified scatterplots, era‑faceted trend lines and parallel-coordinate summaries—both documents these findings and offers a practical benchmark set of “must-produce” views and known ground-truth signals for auto-charting evaluations.</p>
    </div>
  </div>
</section>
<section class='mb-16'>
  <h2 class='text-3xl font-bold mb-6 border-b border-gray-200 pb-2'>
    2. Data overview and preprocessing
  </h2>
  <div class='space-y-10'>
    <div class='prose prose-lg prose-gray max-w-none'>
      <p class="text-gray-700 leading-relaxed mb-4">The Auto MPG data contains per‑car observations from model years 1970–1982 with fields such as mpg, cylinders, displacement, horsepower, weight, acceleration, model year and origin. Practical quirks affect visual analysis: horsepower appears as the string '?' in six rows and must be converted to numeric or set to missing before computations; model year values are stored as two-digit integers and are mapped to full years (1900 + model_year) and filtered to 1970–1982; origin is recoded from numeric codes to labels (USA/Europe/Japan); cylinders are treated as an ordered categorical to preserve meaningful sorting; and a few derived columns—log_weight, weight_kg, power_to_weight, displacement_per_cyl and hp_per_litre—are computed to make trade-offs explicit and to stabilize skewed distributions. These preprocessing choices influence plots and summary statistics: analyses that use horsepower exclude the six missing rows unless imputation is applied, log transforms reduce right skew (especially for weight) and ordered categorical encoding for cylinders helps faceting and color schemes in stratified views.</p>
    </div>
    <div class='my-8'>
      <div class='bg-gray-50 rounded-lg shadow-sm p-4'>
        <div class='mb-4 flex justify-center overflow-x-auto'>
          <div style='width: 100%;'>
            <div id='vis-2-1'></div>
          </div>
        </div>
        <script>
          vegaEmbed('#vis-2-1', {"$schema": "https://vega.github.io/schema/vega-lite/v5.json", "description": "Proportion of records with missing/invalid horsepower by model year (1970-1982), faceted by origin and era buckets.", "data": {"url": "https://raw.githubusercontent.com/the-lord-of-stars/mini-template/dev-yuhan/studio/auto-mpg.csv", "format": {"type": "csv", "parse": {"horsepower": "string", "model_year": "number", "origin": "number"}}}, "transform": [{"calculate": "datum.horsepower == '?' || datum.horsepower == null ? null : toNumber(datum.horsepower)", "as": "horsepower_num"}, {"calculate": "datum.horsepower == '?' || datum.horsepower == null", "as": "horsepower_missing"}, {"calculate": "1900 + toNumber(datum.model_year)", "as": "model_year_mapped"}, {"calculate": "(function(y){return (y>=1970 && y<=1973)?'1970\u201373':(y>=1974 && y<=1979)?'1974\u201379':(y>=1980 && y<=1982)?'1980\u201382':'other';})(1900+toNumber(datum.model_year))", "as": "era"}, {"calculate": "datum.origin == 1 ? 'USA' : datum.origin == 2 ? 'Europe' : datum.origin == 3 ? 'Japan' : 'other'", "as": "origin_label"}, {"filter": "datum.model_year_mapped >= 1970 && datum.model_year_mapped <= 1982"}, {"aggregate": [{"op": "count", "as": "count"}], "groupby": ["model_year_mapped", "origin_label", "horsepower_missing"]}, {"joinaggregate": [{"op": "sum", "field": "count", "as": "total"}], "groupby": ["model_year_mapped", "origin_label"]}, {"calculate": "datum.count / datum.total", "as": "prop_missing"}, {"filter": "datum.horsepower_missing == true"}], "facet": {"row": {"field": "era", "type": "ordinal", "title": "Era"}, "column": {"field": "origin_label", "type": "nominal", "title": "Origin"}}, "spec": {"width": 160, "height": 120, "mark": {"type": "line", "point": true, "interpolate": "monotone"}, "encoding": {"x": {"timeUnit": "year", "field": "model_year_mapped", "type": "temporal", "axis": {"title": "Model Year", "format": "%Y"}}, "y": {"field": "prop_missing", "type": "quantitative", "axis": {"title": "Proportion missing horsepower", "format": ".0%"}, "scale": {"domain": [0, 1]}}, "tooltip": [{"field": "model_year_mapped", "type": "temporal", "timeUnit": "year", "title": "Year"}, {"field": "prop_missing", "type": "quantitative", "title": "% missing", "format": ".1%"}, {"field": "count", "type": "quantitative", "title": "Missing count"}, {"field": "total", "type": "quantitative", "title": "Total count"}]}}, "resolve": {"scale": {"y": "shared"}}, "title": "Missing/Invalid horsepower (\"?\") \u2014 proportion by model year (1970\u20131982), origin and era"}, {
            actions: false,
            renderer: 'canvas',
            config: {}
          })
          .catch(console.error);
        </script>
        <p class='text-sm text-gray-600 mt-2 text-center'>
          <p class="text-gray-700 leading-relaxed mb-4">The missingness visualization shows the proportion of records with invalid horsepower by model year, faceted by origin and grouped into era buckets. Overall horsepower missingness is low (6 of 398, about 1.5%), but it is uneven: Europe has 2/70 missing (2.9%), the USA 4/249 (1.6%) and Japan none. Missingness increases with year (year vs. missing_pct correlation ≈ 0.36), with notable spikes in 1980 (2/29 ≈ 6.9%) and concentrated in the 1980–82 era where Europe shows 13.3% missing and the USA 5.0%; earlier eras have essentially no missing horsepower for non-US origins. For visualization systems this plot highlights a low overall but structured missingness pattern that can bias horsepower‑based analyses if ignored; it therefore signals when to exclude rows, impute, or surface warnings in automated chart recommendations.</p>
        </p>
      </div>
    </div>
  </div>
</section>
<section class='mb-16'>
  <h2 class='text-3xl font-bold mb-6 border-b border-gray-200 pb-2'>
    3. Derived features and design choices
  </h2>
  <div class='space-y-10'>
    <div class='prose prose-lg prose-gray max-w-none'>
      <p class="text-gray-700 leading-relaxed mb-4">Derived features were chosen to expose intuitive engineering trade-offs and to stabilize distributions: power_to_weight (horsepower divided by weight) highlights effective propulsion per unit mass and is useful as a point size or axis to show efficiency density; displacement_per_cyl (displacement ÷ cylinders) captures per‑cylinder engine size and helps compare engine designs across cylinder counts; hp_per_litre normalizes power by engine volume for like‑for‑like comparisons; weight_kg converts reported pounds to kilograms for SI compatibility and downstream modeling; log_weight reduces right skew in weight and improves linear modeling assumptions; and three era buckets (1970–73, 1974–79, 1980–82) capture pre‑crisis, oil‑crisis and early‑1980s cohorts. Numeric transforms (log) are used where skew or heavy tails would distort visual scales; cylinders are encoded as ordered categorical so plots preserve physical ordering (3,4,5,6,8) while remaining discrete for color/shape encodings. These choices balance interpretability, statistical robustness and cross‑chart consistency.</p>
    </div>
  </div>
</section>
<section class='mb-16'>
  <h2 class='text-3xl font-bold mb-6 border-b border-gray-200 pb-2'>
    4. Univariate and bivariate baselines
  </h2>
  <div class='space-y-10'>
    <div class='prose prose-lg prose-gray max-w-none'>
      <p class="text-gray-700 leading-relaxed mb-4">Baseline univariate diagnostics show that MPG and the main vehicle attributes are multimodal and asymmetric: MPG has mean ≈ 23.5, median 23, moderate right skew; weight averages about 2,970 lb with multimodal peaks and right skew; horsepower (n=392 after excluding '?') averages ≈ 104 with greater right skew and several extreme values; and displacement averages ≈ 193 cu in and is similarly multimodal. Origin strata reveal consistent differences: Japanese cars have the highest median MPG (~31.6) and lowest median weight (~2,155 lb), while U.S. cars sit at the low end for MPG (~18.5) and the high end for weight and displacement. Cylinder counts map cleanly to expected trade-offs—4‑cylinder models are the lightest and most fuel‑efficient, 8‑cylinder models the heaviest and least efficient—and log transforms of weight reduce skew and make comparisons more symmetric. These marginal patterns set expectations for multivariate analyses and justify excluding rows with missing horsepower when examining horsepower‑based trade-offs.</p>
    </div>
    <div class='my-8'>
      <div class='bg-gray-50 rounded-lg shadow-sm p-4'>
        <div class='mb-4 flex justify-center overflow-x-auto'>
          <div style='width: 100%;'>
            <div id='vis-4-1'></div>
          </div>
        </div>
        <script>
          vegaEmbed('#vis-4-1', {"$schema": "https://vega.github.io/schema/vega-lite/v5.json", "description": "Marginal distributions (histograms) of mpg, weight, horsepower, and displacement \u2014 overall views broken down by origin (top) and by cylinders (bottom). Horsepower '?' values are set to null and excluded.", "data": {"url": "https://raw.githubusercontent.com/the-lord-of-stars/mini-template/dev-yuhan/studio/auto-mpg.csv", "format": {"type": "csv"}}, "transform": [{"calculate": "datum.horsepower == '?' ? null : toNumber(datum.horsepower)", "as": "horsepower_num"}, {"calculate": "datum.origin == 1 ? 'USA' : datum.origin == 2 ? 'Europe' : 'Japan'", "as": "origin_label"}, {"fold": ["mpg", "weight", "horsepower_num", "displacement"], "as": ["variable", "value"]}, {"calculate": "datum.variable == 'horsepower_num' ? 'horsepower' : datum.variable", "as": "variable_label"}, {"filter": "datum.value != null && !isNaN(datum.value)"}], "vconcat": [{"title": "Distributions by Origin (rows = variable; columns = origin)", "resolve": {"scale": {"x": "independent"}}, "facet": {"row": {"field": "variable_label", "type": "nominal", "title": null}, "column": {"field": "origin_label", "type": "nominal", "title": null}}, "spec": {"width": 160, "height": 90, "mark": {"type": "bar", "opacity": 0.75}, "encoding": {"x": {"field": "value", "type": "quantitative", "bin": {"maxbins": 30}, "title": null}, "y": {"aggregate": "count", "type": "quantitative", "title": "count"}, "color": {"field": "cylinders", "type": "nominal", "title": "Cylinders"}, "tooltip": [{"field": "variable_label", "title": "variable"}, {"field": "value", "type": "quantitative", "title": "value"}, {"field": "origin_label", "title": "origin"}, {"field": "cylinders", "title": "cylinders"}]}}}, {"title": "Distributions by Cylinders (rows = variable; columns = cylinders)", "resolve": {"scale": {"x": "independent"}}, "facet": {"row": {"field": "variable_label", "type": "nominal", "title": null}, "column": {"field": "cylinders", "type": "nominal", "title": null}}, "spec": {"width": 120, "height": 90, "mark": {"type": "bar", "opacity": 0.75}, "encoding": {"x": {"field": "value", "type": "quantitative", "bin": {"maxbins": 30}, "title": null}, "y": {"aggregate": "count", "type": "quantitative", "title": "count"}, "color": {"field": "origin_label", "type": "nominal", "title": "Origin"}, "tooltip": [{"field": "variable_label", "title": "variable"}, {"field": "value", "type": "quantitative", "title": "value"}, {"field": "origin_label", "title": "origin"}, {"field": "cylinders", "title": "cylinders"}]}}}], "config": {"view": {"stroke": "transparent"}, "axis": {"labelFontSize": 10, "titleFontSize": 11}, "legend": {"labelFontSize": 10, "titleFontSize": 11}}}, {
            actions: false,
            renderer: 'canvas',
            config: {}
          })
          .catch(console.error);
        </script>
        <p class='text-sm text-gray-600 mt-2 text-center'>
          <p class="text-gray-700 leading-relaxed mb-4">The histogram panels display marginal distributions of MPG, weight, horsepower and displacement split by origin (top series) and by cylinders (bottom series). All four variables are clearly multimodal, with horsepower showing the most extreme tails and outliers (10 IQR outliers and 5 z>3 extremes) and six missing values excluded from the horsepower panels. Origin panels reinforce that U.S. cars cluster at higher weights and displacements and lower MPG, Europe sits in the middle, and Japan concentrates at lower weight and higher MPG; median comparisons show Japan with the highest MPG median and USA with the lowest. Cylinder‑based facets confirm the expected monotonic shifts—more cylinders map to higher median weight and displacement and lower MPG—while also revealing skew differences across cylinder counts (e.g., strong skew in 6‑cyl and 3‑cyl groups). These marginal views are essential baselines for automated charting: they verify scaling choices, identify multimodality and flag horsepower as a variable with both missingness and outliers that need special handling.</p>
        </p>
      </div>
    </div>
  </div>
</section>
<section class='mb-16'>
  <h2 class='text-3xl font-bold mb-6 border-b border-gray-200 pb-2'>
    5. Multivariate trade-offs (core analysis)
  </h2>
  <div class='space-y-10'>
    <div class='prose prose-lg prose-gray max-w-none'>
      <p class="text-gray-700 leading-relaxed mb-4">The multivariate core confirms that MPG is primarily governed by a tightly interlinked trio—weight, displacement and horsepower—whose positive collinearity means reducing one tends to accompany reductions in the others and yields higher MPG. Pairwise correlations are large in magnitude (mpg vs weight: r ≈ −0.832; mpg vs displacement: r ≈ −0.805; mpg vs horsepower: r ≈ −0.778), and weight vs displacement (r ≈ 0.93) or horsepower vs displacement (r ≈ 0.897) show especially high collinearity. These relationships persist across origins but vary in strength: the negative MPG correlations are strongest in U.S. models (e.g., mpg vs weight r ≈ −0.846) and weaker in Europe and Japan. Cylinder stratification reveals nuanced interactions—within 4‑cyl groups mpg still falls with weight, but in 6‑cyl cars horsepower correlates weakly with mpg (near zero), suggesting heterogeneity of engine/vehicle designs in that set. Outliers (e.g., Mazda GLC and several diesel Volkswagen models) stand apart with unusually high MPG for their configurations and are valuable test cases for model fit and robust visual summaries. Visually and statistically, the best single‑axis lever for MPG is weight (largest negative correlation), but because of strong collinearity among engine size, displacement and weight, trade-offs are multivariate and benefit from stratified or conditional views and parallel‑coordinate summaries to show joint patterns.</p>
    </div>
    <div class='my-8'>
      <div class='bg-gray-50 rounded-lg shadow-sm p-4'>
        <div class='mb-4 flex justify-center overflow-x-auto'>
          <div style='width: 100%;'>
            <div id='vis-5-1'></div>
          </div>
        </div>
        <script>
          vegaEmbed('#vis-5-1', {"$schema": "https://vega.github.io/schema/vega-lite/v5.json", "title": "Pairwise scatter matrix \u2014 mpg, weight, horsepower, displacement, acceleration (colored by origin; shaped by cylinders)", "data": {"url": "https://raw.githubusercontent.com/the-lord-of-stars/mini-template/dev-yuhan/studio/auto-mpg.csv"}, "transform": [{"calculate": "datum['horsepower'] === '?' ? null : toNumber(datum['horsepower'])", "as": "horsepower_num"}, {"filter": {"field": "horsepower_num", "valid": true}}, {"calculate": "datum['origin'] == 1 ? 'USA' : datum['origin'] == 2 ? 'Europe' : datum['origin'] == 3 ? 'Japan' : 'Other'", "as": "origin_label"}, {"calculate": "log(datum['weight'])", "as": "log_weight"}, {"calculate": "toString(datum['cylinders'])", "as": "cyl_str"}], "repeat": {"row": ["mpg", "weight", "horsepower_num", "displacement", "acceleration"], "column": ["mpg", "weight", "horsepower_num", "displacement", "acceleration"]}, "spec": {"width": 130, "height": 130, "mark": {"type": "point", "filled": false, "opacity": 0.75}, "encoding": {"x": {"field": {"repeat": "column"}, "type": "quantitative", "axis": {"labels": true, "grid": false}}, "y": {"field": {"repeat": "row"}, "type": "quantitative", "axis": {"labels": true, "grid": false}}, "color": {"field": "origin_label", "type": "nominal", "title": "Origin", "scale": {"scheme": "category10"}}, "shape": {"field": "cyl_str", "type": "nominal", "title": "Cylinders"}, "size": {"value": 40}, "tooltip": [{"field": "car name", "type": "nominal", "title": "Car"}, {"field": "model year", "type": "quantitative", "title": "Model Year"}, {"field": "cyl_str", "type": "nominal", "title": "Cylinders"}, {"field": "origin_label", "type": "nominal", "title": "Origin"}, {"field": "mpg", "type": "quantitative", "title": "mpg"}, {"field": "weight", "type": "quantitative", "title": "weight"}, {"field": "horsepower_num", "type": "quantitative", "title": "horsepower"}]}}, "resolve": {"legend": {"shape": "shared", "color": "shared"}}, "config": {"view": {"stroke": "#ddd"}, "axis": {"labelFontSize": 10, "titleFontSize": 11}}}, {
            actions: false,
            renderer: 'canvas',
            config: {}
          })
          .catch(console.error);
        </script>
        <p class='text-sm text-gray-600 mt-2 text-center'>
          <p class="text-gray-700 leading-relaxed mb-4">The pairwise scatter‑matrix emphasizes the strong negative relationships between MPG and vehicle size/power and the very strong positive associations among weight, displacement and horsepower. Cells pairing weight, displacement and horsepower show tight, nearly linear positive clouds (weight vs displacement r ≈ 0.933; horsepower vs displacement r ≈ 0.897), while MPG vs those variables shows clear downward trends (mpg vs weight r ≈ −0.832, slope ≈ −90.6 when units are left in original scales). Coloring by origin reveals that U.S. points dominate the heavy/low‑MPG corner, European points sit intermediate and Japanese points cluster in the light/high‑MPG area; shape by cylinders highlights how cylinder counts stratify clouds. The matrix also surfaces outliers and heterogeneity—several cars with large positive residuals from an mpg~weight fit are obvious by eye—and supports the summary correlations reported per origin and per cylinder group. This view is an essential benchmark: automated systems should reproduce both the strong collinearity among engine/weight variables and the differing slopes and spreads by origin, as well as flagging the same outlier cases.</p>
        </p>
      </div>
    </div>
  </div>
</section>
<section class='mb-16'>
  <h2 class='text-3xl font-bold mb-6 border-b border-gray-200 pb-2'>
    6. Temporal & origin comparisons
  </h2>
  <div class='space-y-10'>
    <div class='prose prose-lg prose-gray max-w-none'>
      <p class="text-gray-700 leading-relaxed mb-4">Temporal analysis shows a pronounced era effect: the oil‑shock period around 1974 coincides with abrupt reductions in horsepower and weight and attendant increases in MPG, and those shifts persist into the early 1980s. Comparing era medians highlights the change—across eras mean weight falls roughly 24.5% while mean MPG rises about 72% from 1970–73 to 1980–82—and the strongest year‑to‑year jumps occur at 1973→1974 when many origins show sudden drops in horsepower and weight and immediate MPG gains. Origins differ in both baseline and pace: U.S. cars started heavy and powerful and show the largest absolute MPG improvement (USA slope ≈ +1.11 mpg/year), Japan shows large percentage improvements and achieves the highest median MPG by 1980–82, and Europe shows steadier, more moderate shifts. The weight–MPG relationship remains negative throughout but weakens over time (weight vs mpg r goes from about −0.91 in 1970–73 to −0.73 in 1980–82), consistent with increasing engineering options and design diversification that reduce the simple one‑to‑one dependence of MPG on vehicle mass.</p>
    </div>
    <div class='my-8'>
      <div class='bg-gray-50 rounded-lg shadow-sm p-4'>
        <div class='mb-4 flex justify-center overflow-x-auto'>
          <div style='width: 100%;'>
            <div id='vis-6-1'></div>
          </div>
        </div>
        <script>
vegaEmbed('#vis-6-1', {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Median mpg, horsepower, and weight by model year and origin (USA/Europe/Japan). Vertical dashed line marks 1974 (oil-crisis era).",
  "data": {
    "url": "https://raw.githubusercontent.com/the-lord-of-stars/mini-template/dev-yuhan/studio/auto-mpg.csv",
    "format": {"type": "csv"}
  },
  "transform": [
    {"calculate": "toNumber(datum['mpg'])", "as": "mpg_num"},
    {"calculate": "datum['horsepower'] == '?' ? null : toNumber(datum['horsepower'])", "as": "hp_num"},
    {"calculate": "toNumber(datum['weight'])", "as": "wt"},
    {"calculate": "1900 + toNumber(datum['model year'])", "as": "year_int"},
    {"calculate": "datetime(datum['year_int'], 0, 1)", "as": "year_date"},
    {
      "calculate": "toNumber(datum['origin']) == 1 ? 'USA' : toNumber(datum['origin']) == 2 ? 'Europe' : toNumber(datum['origin']) == 3 ? 'Japan' : ''",
      "as": "origin_label"
    },
    {
      "calculate": "datum['year_int'] >= 1970 && datum['year_int'] <= 1973 ? '1970–73' : datum['year_int'] >= 1974 && datum['year_int'] <= 1979 ? '1974–79' : datum['year_int'] >= 1980 && datum['year_int'] <= 1982 ? '1980–82' : 'other'",
      "as": "era_bucket"
    },
    {
      "aggregate": [
        {"op": "median", "field": "mpg_num", "as": "median_mpg"},
        {"op": "median", "field": "hp_num", "as": "median_hp"},
        {"op": "median", "field": "wt", "as": "median_wt"}
      ],
      "groupby": ["year_date", "year_int", "origin_label", "era_bucket"]
    }
  ],
  "vconcat": [
    {
      "title": "Median MPG by Year and Origin",
      "layer": [
        {
          "mark": {"type": "line", "point": true},
          "encoding": {
            "x": {"field": "year_date", "type": "temporal", "title": "Year", "axis": {"format": "%Y"}},
            "y": {"field": "median_mpg", "type": "quantitative", "title": "Median MPG"},
            "color": {"field": "origin_label", "type": "nominal", "title": "Origin"},
            "tooltip": [
              {"field": "year_int", "type": "quantitative", "title": "Year"},
              {"field": "origin_label", "type": "nominal", "title": "Origin"},
              {"field": "era_bucket", "type": "nominal", "title": "Era"},
              {"field": "median_mpg", "type": "quantitative", "title": "Median MPG"}
            ]
          }
        },
        {
          "data": {"values": [{"oil_date": "1974-01-01"}]},
          "mark": {"type": "rule", "color": "#d62728", "strokeDash": [4, 4], "opacity": 0.8},
          "encoding": {"x": {"field": "oil_date", "type": "temporal"}}
        }
      ]
    },
    {
      "title": "Median Horsepower by Year and Origin",
      "layer": [
        {
          "mark": {"type": "line", "point": true},
          "encoding": {
            "x": {"field": "year_date", "type": "temporal", "title": "Year", "axis": {"format": "%Y"}},
            "y": {"field": "median_hp", "type": "quantitative", "title": "Median Horsepower"},
            "color": {"field": "origin_label", "type": "nominal", "title": "Origin"},
            "tooltip": [
              {"field": "year_int", "type": "quantitative", "title": "Year"},
              {"field": "origin_label", "type": "nominal", "title": "Origin"},
              {"field": "era_bucket", "type": "nominal", "title": "Era"},
              {"field": "median_hp", "type": "quantitative", "title": "Median Horsepower"}
            ]
          }
        },
        {
          "data": {"values": [{"oil_date": "1974-01-01"}]},
          "mark": {"type": "rule", "color": "#d62728", "strokeDash": [4, 4], "opacity": 0.8},
          "encoding": {"x": {"field": "oil_date", "type": "temporal"}}
        }
      ]
    },
    {
      "title": "Median Weight (lbs) by Year and Origin",
      "layer": [
        {
          "mark": {"type": "line", "point": true},
          "encoding": {
            "x": {"field": "year_date", "type": "temporal", "title": "Year", "axis": {"format": "%Y"}},
            "y": {"field": "median_wt", "type": "quantitative", "title": "Median Weight (lbs)"},
            "color": {"field": "origin_label", "type": "nominal", "title": "Origin"},
            "tooltip": [
              {"field": "year_int", "type": "quantitative", "title": "Year"},
              {"field": "origin_label", "type": "nominal", "title": "Origin"},
              {"field": "era_bucket", "type": "nominal", "title": "Era"},
              {"field": "median_wt", "type": "quantitative", "title": "Median Weight (lbs)"}
            ]
          }
        },
        {
          "data": {"values": [{"oil_date": "1974-01-01"}]},
          "mark": {"type": "rule", "color": "#d62728", "strokeDash": [4, 4], "opacity": 0.8},
          "encoding": {"x": {"field": "oil_date", "type": "temporal"}}
        }
      ]
    }
  ],
  "resolve": {"legend": {"title": "Origin"}}
}, {
  actions: false,
  renderer: 'canvas',
  config: {}
}).catch(console.error);
</script>

        <p class='text-sm text-gray-600 mt-2 text-center'>
          <p class="text-gray-700 leading-relaxed mb-4">The median time‑series panels plot median MPG, horsepower and weight by year for each origin with a vertical marker at 1974 to emphasize the oil‑crisis inflection. The plotted medians confirm abrupt 1973→1974 changes: across origins horsepower and weight fall sharply while median MPG rises, and the magnitudes vary by origin—Japan shows very large immediate MPG gains and strong weight reductions, while the U.S. shows large horsepower declines and substantial weight reductions but from a higher baseline. Era summaries quantify these shifts: for example, from 1970–73 to 1974–79 Japan’s median MPG increases roughly +24% while horsepower falls ~24%; the U.S. sees a larger percent drop in horsepower (~30%) and a large MPG lift (~27%). The line plots make the oil‑crisis signal explicit and are useful automated checks: charting systems should reproduce the 1974 break, origin‑specific magnitudes, and tooltip medians per year as seen in the data.</p>
        </p>
      </div>
    </div>
    <div class='my-8'>
      <div class='bg-gray-50 rounded-lg shadow-sm p-4'>
        <div class='mb-4 flex justify-center overflow-x-auto'>
          <div style='width: 100%;'>
            <div id='vis-6-2'></div>
          </div>
        </div>
        <script>
          vegaEmbed('#vis-6-2', {"$schema": "https://vega.github.io/schema/vega-lite/v5.json", "description": "Weight vs MPG scatter, faceted by era (1970-73, 1974-79, 1980-82) and colored by origin. Size encodes horsepower/weight.", "data": {"url": "https://raw.githubusercontent.com/the-lord-of-stars/mini-template/dev-yuhan/studio/auto-mpg.csv", "format": {"type": "csv"}}, "transform": [{"calculate": "var hpRaw = datum.horsepower || datum['horsepower']; var hp = +hpRaw; isNaN(hp) ? null : hp", "as": "hp_num"}, {"calculate": "var wRaw = datum.weight || datum['weight']; var w = +wRaw; isNaN(w) ? null : w", "as": "weight_num"}, {"calculate": "var mRaw = datum.mpg || datum['mpg']; var m = +mRaw; isNaN(m) ? null : m", "as": "mpg_num"}, {"calculate": "var yRaw = datum['model year'] || datum.model_year || datum['model_year']; var y = +yRaw; isNaN(y) ? null : (y + 1900)", "as": "year"}, {"calculate": "var o = datum.origin || datum['origin']; (o==1 || o=='1') ? 'USA' : ((o==2 || o=='2') ? 'Europe' : ((o==3 || o=='3') ? 'Japan' : o))", "as": "origin_label"}, {"calculate": "datum['car name'] || datum.name || datum['name']", "as": "car_name"}, {"calculate": "(datum.hp_num != null && datum.weight_num != null) ? datum.hp_num / datum.weight_num : null", "as": "power_to_weight"}, {"calculate": "(datum.year >= 1970 && datum.year <= 1973) ? '1970-73' : (datum.year >= 1974 && datum.year <= 1979) ? '1974-79' : (datum.year >= 1980 && datum.year <= 1982) ? '1980-82' : 'other'", "as": "era"}, {"filter": "datum.weight_num != null && datum.mpg_num != null && datum.era != 'other'"}], "facet": {"column": {"field": "era", "type": "ordinal", "title": "Era", "sort": ["1970-73", "1974-79", "1980-82"]}}, "spec": {"width": 250, "height": 200, "mark": {"type": "point", "filled": true, "opacity": 0.75}, "encoding": {"x": {"field": "weight_num", "type": "quantitative", "title": "Weight (lbs)", "axis": {"grid": true}}, "y": {"field": "mpg_num", "type": "quantitative", "title": "Fuel economy (MPG)", "axis": {"grid": true}}, "color": {"field": "origin_label", "type": "nominal", "title": "Origin", "scale": {"scheme": "category10"}}, "size": {"field": "power_to_weight", "type": "quantitative", "title": "Power / Weight (hp per lb)", "scale": {"range": [20, 200]}}, "tooltip": [{"field": "car_name", "type": "nominal", "title": "Car"}, {"field": "year", "type": "temporal", "title": "Year"}, {"field": "origin_label", "type": "nominal", "title": "Origin"}, {"field": "mpg_num", "type": "quantitative", "title": "MPG"}, {"field": "weight_num", "type": "quantitative", "title": "Weight (lbs)"}, {"field": "hp_num", "type": "quantitative", "title": "Horsepower"}, {"field": "power_to_weight", "type": "quantitative", "title": "Power/Weight"}]}}, "resolve": {"scale": {"x": "independent", "y": "independent"}}}, {
            actions: false,
            renderer: 'canvas',
            config: {}
          })
          .catch(console.error);
        </script>
        <p class='text-sm text-gray-600 mt-2 text-center'>
          <p class="text-gray-700 leading-relaxed mb-4">The weight vs MPG scatter faceted by era visualizes how the joint distribution evolves: in the 1970–73 facet the cloud is dense in the heavy/low‑MPG area with a very steep negative relation (weight vs mpg r ≈ −0.91), in 1974–79 the cloud shifts left and upward while retaining a strong negative slope (r ≈ −0.88), and by 1980–82 the cloud moves substantially toward lighter, higher‑MPG designs with a weaker negative association (r ≈ −0.73). Point size encoding of power_to_weight highlights that high power per unit mass concentrates among heavier, lower‑MPG vehicles in early eras and becomes less dominant in later eras as manufacturers deliver higher MPG for lighter designs. Era means quantify the change (1970–73 mean weight ≈ 3,272 lb and MPG ≈ 18.5; 1980–82 mean weight ≈ 2,471 lb and MPG ≈ 31.9), and example extremes—very heavy low‑MPG trucks in the early 1970s versus lightweight high‑MPG compacts like the Mazda GLC and Honda Civic in the early 1980s—illustrate the design shift. This faceted scatter is a strong benchmark for automated systems because it requires consistent year mapping, era binning, reliable size encoding, and reproducing the weakening weight‑MPG association over time.</p>
        </p>
      </div>
    </div>
  </div>
</section>
<section class='mb-16'>
  <h2 class='text-3xl font-bold mb-6 border-b border-gray-200 pb-2'>
    7. Conclusions, implications & benchmarking notes
  </h2>
  <div class='space-y-10'>
    <div class='prose prose-lg prose-gray max-w-none'>
      <p class="text-gray-700 leading-relaxed mb-4">In summary, weight, displacement and horsepower are the dominant, tightly coupled determinants of MPG in the 1970–1982 Auto MPG data, and the 1974 oil crisis precipitated a rapid shift toward lighter, lower‑power and more fuel‑efficient cars with origin‑specific patterns: the U.S. shows the largest absolute improvements from a heavy baseline, Japan yields the highest MPG medians by 1980–82, and Europe follows intermediate paths. For designers and policymakers the practical implication is clear—reducing vehicle mass and engine displacement yields the largest MPG gains—but collinearity means interventions often trade off several attributes at once. For benchmarking auto‑charting systems, recommended canonical views are marginal histograms, pairwise scatter matrices, era‑faceted weight vs MPG scatterplots, median time series with a 1974 marker, and parallel‑coordinate summaries; hard cases to test include the sparse horsepower missingness, multimodal distributions and outliers, cylinder ordering, and reproducing origin‑specific slopes and era breaks as ground truth. These concrete signals provide a compact suite of validation criteria for automated visualization recommendation and generation tools.</p>
    </div>
  </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const toc = document.getElementById('toc');
  if (!toc) return;

  const headers = document.querySelectorAll('article h2, article h3');
  headers.forEach(h => {
    let id = h.textContent.trim().replace(/\s+/g, '-').toLowerCase();
    h.setAttribute('id', id);

    const link = document.createElement('a');
    link.href = '#' + id;
    link.textContent = h.textContent;
    link.className = (h.tagName === 'H2'
      ? 'block font-semibold mb-1'      : 'block ml-4 text-gray-500') + ' hover:text-primary-600';

    toc.appendChild(link);
  });
});
</script>
    </article>
  </main>
  <footer class='border-t mt-12 py-6 text-center text-sm text-gray-500'>
    © 2025 Agentic VIS
  </footer>
  <script>
  document.addEventListener('DOMContentLoaded', function () {
  const tocList = document.getElementById('toc-list');
  const headers = document.querySelectorAll('article h2, article h3');
  const links = [];

  headers.forEach((h, idx) => {
    let id = h.textContent.trim().replace(/\s+/g, '-').toLowerCase() + '-' + idx;
    h.setAttribute('id', id);

    const li = document.createElement('li');
    li.className = 'flex items-center space-x-2';

    const dot = document.createElement('span');
    dot.className = 'w-2 h-2 rounded-full border border-gray-300';
    li.appendChild(dot);

    const link = document.createElement('a');
    link.href = '#' + id;

    const text = h.textContent.trim();
    link.textContent = text.length > 40 ? text.slice(0, 37) + '…' : text;
    link.title = text;

    link.className = 'block truncate text-gray-400 hover:text-gray-600';
    if (h.tagName === 'H3') {
      link.className += ' ml-4';
    }

    link.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.getElementById(id);
      if (target) {
        const y = target.getBoundingClientRect().top + window.scrollY - 100;
        window.scrollTo({ top: y, behavior: 'smooth' });
      }
    });

    li.appendChild(link);
    tocList.appendChild(li);
    links.push({id, link, el: h, dot});
  });

  function onScroll() {
    let scrollPos = document.documentElement.scrollTop || document.body.scrollTop;
    let current;
    links.forEach(item => {
      if (item.el.offsetTop - 120 <= scrollPos) {
        current = item;
      }
    });
    links.forEach(item => {
      item.link.classList.remove('font-semibold', 'text-black');
      item.link.classList.add('text-gray-400');
      item.dot.className = 'w-2 h-2 rounded-full border border-gray-300';
    });
    if (current) {
      current.link.classList.remove('text-gray-400');
      current.link.classList.add('font-semibold', 'text-black');
      current.dot.className = 'w-2 h-2 rounded-full bg-black';
    }
  }
  window.addEventListener('scroll', onScroll);
  onScroll();
});
</script>
<script>
window.addEventListener('scroll', function () {
  const docHeight = document.documentElement.scrollHeight - window.innerHeight;
  const scrollTop = window.scrollY || document.documentElement.scrollTop;
  const progress = (scrollTop / docHeight) * 100;
  document.getElementById('progress-bar').style.width = progress + '%';
});
</script></body>
</html>